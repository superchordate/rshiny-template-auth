<!-- Claude helped me build this! -->
<div class="w-full pt-12 flex justify-center"><div class="bg-white p-8 rounded-lg shadow-md w-96">
    <h2 class="text-2xl font-bold mb-6 text-center text-gray-800">Login</h2>
    
    <div>
        {{if(auth_methods$email) HTML('
            <div class="mb-4">
                <label class="block text-gray-700 text-sm font-bold mb-2" for="email">
                    Email
                </label>
                <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" 
                    id="email" type="text" placeholder="Username" required>
            </div>
            
            <div id="passwordblock" class="mb-6">
                <label class="block text-gray-700 text-sm font-bold mb-2" for="password">
                    Password
                </label>
                <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline" 
                    id="password" type="password" placeholder="******************" required>
            </div>
        ')}}
        
        <div class="flex flex-col gap-4">
            
            {{if(auth_methods$email) HTML('
                <button id="signin" class="cursor-pointer bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full" 
                    onclick="loginWithEmailPassword()">
                    Sign In
                </button>
                
                <button id="forgotPassword" class="hidden cursor-pointer bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full" 
                    onclick="forgotPassword()">
                        Send Password Reset Email
                </button>
                
                <button id="newUser" class="hidden cursor-pointer bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full" 
                    onclick="newUser()">
                        Register
                </button>
            ')}}
            
            {{if(auth_methods$google) HTML('
                <button type="button" id="loginWithGoogle"
                    onclick="loginWithGoogle()"
                    class="cursor-pointer flex items-center justify-center gap-2 bg-white border border-gray-300 text-gray-700 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full hover:bg-gray-50">
                    <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDQ4IDQ4Ij48cGF0aCBmaWxsPSIjRkZDMTA3IiBkPSJNNDMuNjExLDIwLjA4M0g0MlYyMEgyNHY4aDExLjMwM2MtMS42NDksNC42NTctNi4wOCw4LTExLjMwMyw4Yy02LjYyNywwLTEyLTUuMzczLTEyLTEyYzAtNi42MjcsNS4zNzMtMTIsMTItMTJjMy4wNTksMCw1Ljg0MiwxLjE1NCw3Ljk2MSwzLjAzOWw1LjY1Ny01LjY1N0MzNC4wNDYsNi4wNTMsMjkuMjY4LDQsMjQsNEMxMi45NTUsNCw0LDEyLjk1NSw0LDI0YzAsMTEuMDQ1LDguOTU1LDIwLDIwLDIwYzExLjA0NSwwLDIwLTguOTU1LDIwLTIwQzQ0LDIyLjY1OSw0My44NjIsMjEuMzUsNDMuNjExLDIwLjA4M3oiPjwvcGF0aD48cGF0aCBmaWxsPSIjRkYzRDAwIiBkPSJNNi4zMDYsMTQuNjkxbDYuNTcxLDQuODE5QzE0LjY1NSwxNS4xMDgsMTguOTYxLDEyLDI0LDEyYzMuMDU5LDAsNS44NDIsMS4xNTQsNy45NjEsMy4wMzlsNS42NTctNS42NTdDMzQuMDQ2LDYuMDUzLDI5LjI2OCw0LDI0LDRDMTYuMzE4LDQsOS42NTYsOC4zMzcsNi4zMDYsMTQuNjkxeiI+PC9wYXRoPjxwYXRoIGZpbGw9IiM0Q0FGNTAiIGQ9Ik0yNCw0NGM1LjE2NiwwLDkuODYtMS45NzcsMTMuNDA5LTUuMTkybC02LjE5LTUuMjM4QzI5LjIxMSwzNS4wOTEsMjYuNzE1LDM2LDI0LDM2Yy01LjIwMiwwLTkuNjE5LTMuMzE3LTExLjI4My03Ljk0NmwtNi41MjIsNS4wMjVDOS41MDUsMzkuNTU2LDE2LjIyNyw0NCwyNCw0NHoiPjwvcGF0aD48cGF0aCBmaWxsPSIjMTk3NkQyIiBkPSJNNDMuNjExLDIwLjA4M0g0MlYyMEgyNHY4aDExLjMwM2MtMC43OTIsMi4yMzctMi4yMzEsNC4xNjYtNC4wODcsNS41NzFjMC4wMDEtMC4wMDEsMC4wMDItMC4wMDEsMC4wMDMtMC4wMDJsNi4xOSw1LjIzOEMzNi45NzEsMzkuMjA1LDQ0LDM0LDQ0LDI0QzQ0LDIyLjY1OSw0My44NjIsMjEuMzUsNDMuNjExLDIwLjA4M3oiPjwvcGF0aD48L3N2Zz4=" 
                        alt="Google logo" 
                        class="w-6 h-6">
                    Login with Google
                </button>
            ')}}
        </div>

        {{if(auth_methods$email) HTML(paste0('
            <div class="mt-4 space-4">
                <button class="cursor-pointer text-gray-600 hover:text-gray-800 text-sm mb-2 underline" onclick="forgotPasswordShow()" id="forgotPassword_button">
                    Forgot password?
                </button><br/>', if(auth_methods$allow_register_new_user) '
                <button class="cursor-pointer text-gray-600 hover:text-gray-800 text-sm underline" onclick="newUserShow()" id="newUser_button">
                    Register as a new user.
                </button>', '
            </div>
        '))}}
    </div>
</div></div>

<script>
    function loginWithEmailPassword() {

        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
  
        auth.signInWithEmailAndPassword(email, password)
            .catch((error) => {
                console.log(error)
            });
    }

    function loginWithGoogle() {        
        auth.signInWithPopup(new firebase.auth.GoogleAuthProvider());
    }

    function forgotPasswordShow(){
        document.getElementById('signin').classList.toggle('hidden');
        document.getElementById('passwordblock').classList.toggle('hidden');
        document.getElementById('loginWithGoogle').classList.toggle('hidden');
        document.getElementById('forgotPassword').classList.toggle('hidden');
        document.getElementById('forgotPassword_button').classList.toggle('hidden');
        document.getElementById('newUser_button').classList.toggle('hidden');
    }

    function forgotPassword() {
        const email = document.getElementById('email').value;
        auth.sendPasswordResetEmail(email)
            .then(() => {
                alert("Password reset email sent!");
            })
            .catch((error) => {
                alert(error)
            });
    }

    function newUserShow() {
        document.getElementById('signin').classList.toggle('hidden');
        document.getElementById('loginWithGoogle').classList.toggle('hidden');
        document.getElementById('forgotPassword_button').classList.toggle('hidden');
        document.getElementById('newUser_button').classList.toggle('hidden');
        document.getElementById('newUser').classList.toggle('hidden');
    }
    
    function newUser() {
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        auth.createUserWithEmailAndPassword(email, password)
            .then(user => {
                alert("User created!");
                newUserShow()
            })
            .catch((error) => {
                alert(error)
            });
    }
</script>